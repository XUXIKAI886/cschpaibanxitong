# 调休期间工作对接功能设计

日期：2026-01-30

## 背景
运营智能排班系统新增“调休期间工作对接”说明与联动展示，用于明确调休期间的 1 对 1 捆绑对接关系，并在排班表中直观提示对接人。

## 目标
- 固定展示对接规则与说明，便于统一知晓。
- 在排班表“休息”单元格内联显示对接人，提升可用性。
- 不改变现有排班逻辑与数据结构，避免回归风险。

## 需求确认
- 固定说明卡片：显示在页面顶部。
- 联动展示：在表格单元格内显示对接人。
- “休息”即视为“调休”，无需新增状态。
- 无匹配规则时显示“对接：无固定安排”。

## 方案对比
- 方案一（推荐）：单元格内联小字提示 + 顶部规则卡片。改动小、阅读直观。
- 方案二：单元格仅放徽标，悬浮提示。界面更清爽，但交互成本更高。
- 方案三：单元格内联 + 可折叠卡片。信息可控，但需要额外交互。

## 设计方案（采用方案一）
### 界面与组件
- 在页面顶部新增“调休期间工作对接”规则卡片。
- 卡片内容：三条绑定关系 + “如遇特殊情况，将提前调整对接安排，非固定不变”的提示语。
- 排班表单元格内联显示对接信息，字体更小、颜色使用次级文本色。

### 数据结构
- 新增对接映射常量：
  - `handoverMap = { '王涛': '王郡江', '王清月': '杨有淇', '袁丽妮': '张玉莲' }`
- 规则卡片内容由该映射生成，避免多处手写不一致。

### 渲染逻辑
- 渲染单元格时：
  - 若状态为“休息”：显示“对接：<姓名>”或“对接：无固定安排”。
  - 若状态为“上班/空白”：不显示对接信息。
- 顶部规则卡片从 `handoverMap` 动态生成列表。

### 兼容与影响
- 不修改排班算法与本地存储结构。
- 不新增依赖，仅复用现有样式体系。
- 对现有交互（拖拽、点击、导出）无影响。

## 测试建议（手测）
1. 生成排班，确认“王涛/王清月/袁丽妮”休息单元格显示对应对接人。
2. 其他员工休息单元格显示“对接：无固定安排”。
3. 上班/空白单元格不显示对接文本。
4. 顶部规则卡片展示完整三条关系与提示语。

## 风险与注意
- 单元格空间有限，需控制文字字号与行高，避免影响可读性。
- 后续规则调整需仅修改 `handoverMap`，保持单一来源。
